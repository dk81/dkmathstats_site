<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Text Analysis In R On Linkin Park - Meteora Song Lyrics</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">dkmathstats Website</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="mathstats_pages.html">Math &amp; Stats Pages</a>
</li>
<li>
  <a href="r-projects.html">R Programming</a>
</li>
<li>
  <a href="python_projects.html">Python Items</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Text Analysis In R On Linkin Park - Meteora Song Lyrics</h1>

</div>


<p> </p>
<p>Hi. In this page, I share some experimental work that I have done in the programming language R. With R, I have done text analysis on the Linkin Park music album Meteora. I look at word counts and determine if the album overall is positive or negative. Results are shown with code outputs and plots.</p>
<p> </p>
<center>
<img src="linkin_park_meteora.jpg" />
</center>
<p> </p>
<p>Image Link Source: <a href="https://hardgraftrecords.com/products/linkin-park-meteora-lp" class="uri">https://hardgraftrecords.com/products/linkin-park-meteora-lp</a></p>
<p> </p>
<div id="sections" class="section level3">
<h3><u>Sections</u></h3>
<p> </p>
<ul>
<li><a href="#album">The Meteora Album</a></li>
<li><a href="#load">Loading In The Lyrics Into R</a></li>
<li><a href="#word-counts">Word Counts In Meteora</a></li>
<li><a href="#sentiment">Sentiment Analysis In Linkin Park - Meteora</a></li>
<li><a href="#bigrams">Bigrams In Meteora</a></li>
</ul>
<p><a name="album"></a></p>
<p> </p>
</div>
<div id="the-meteora-album" class="section level3">
<h3><u>The Meteora Album</u></h3>
<p> </p>
<p>Linkin Park’s Meteora album was the second studio album from the American band. This album was released in 2003 and contains the singles Somewhere I Belong, Faint, Numb, From The Inside and Breaking The Habit.</p>
<p> </p>
<p>Song List In Linkin Park - Meteora</p>
<p> </p>
<ol style="list-style-type: decimal">
<li>Foreword</li>
<li>Don’t Stay</li>
<li>Somewhere I Belong</li>
<li>Lying From You</li>
<li>Hit The Floor</li>
<li>Easier To Run</li>
<li>Faint</li>
<li>Figure.09</li>
<li>Breaking The Habit</li>
<li>From The Inside</li>
<li>Nobody’s Listening</li>
<li>Session [Instrumental]</li>
<li>Numb</li>
</ol>
<p><a name="load"></a></p>
<p> </p>
</div>
<div id="loading-in-the-lyrics-into-r" class="section level3">
<h3><u>Loading In The Lyrics Into R</u></h3>
<p> </p>
<p>The lyrics from all the songs in the Meteora album were copied from a lyrics website and the pasted into a .txt file. Whenever a .txt file is loaded into R (R Studio), you need to set the working directory of the folder where the .txt file is located. Once the working directory is set, you can read in the .txt file into R.</p>
<p>In the code below, I load in the <code>dplyr</code>, <code>ggplot2</code> and <code>tidytext</code> libraries into R. I then read in the lyrics and convert the lyrics into a data frame. The <code>head()</code> function is for previewing the lyrics.</p>
<p>The last line of code with the <code>unnest_tokens()</code> functions converts the data frame in such a way such that each word has its own row.</p>
<p> </p>
<pre class="r"><code># Load libraries into R:

library(dplyr)
library(ggplot2)
library(tidytext)

# Read lyrics into R:

meteora_lyrics &lt;- readLines(&quot;meteoraLyrics.txt&quot;)</code></pre>
<pre><code>## Warning in readLines(&quot;meteoraLyrics.txt&quot;): incomplete final line found on
## &#39;meteoraLyrics.txt&#39;</code></pre>
<pre class="r"><code># Preview all the lyrics:

meteora_lyrics_df &lt;- data_frame(Text = meteora_lyrics) # tibble aka neater data frame

head(meteora_lyrics_df, n = 15)</code></pre>
<pre><code>## # A tibble: 15 x 1
##                                            Text
##                                           &lt;chr&gt;
##  1 Sometimes I need to remember just to breathe
##  2    Sometimes I need you to stay away from me
##  3     Sometimes I&#39;m in disbelief I didn&#39;t know
##  4                     Somehow I need you to go
##  5                                             
##  6                                   Don&#39;t stay
##  7                          Forget our memories
##  8                     Forget our possibilities
##  9               What you were changing me into
## 10                 Just give me myself back and
## 11                                   Don&#39;t stay
## 12                          Forget our memories
## 13                     Forget our possibilities
## 14         Take all your faithlessness with you
## 15                 Just give me myself back and</code></pre>
<pre class="r"><code>meteora_words &lt;- meteora_lyrics_df %&gt;% 
  unnest_tokens(output = word, input = Text)</code></pre>
<p><a name="word-counts"></a></p>
<p> </p>
</div>
<div id="word-counts-in-meteora" class="section level3">
<h3><u>Word Counts In Meteora</u></h3>
<p> </p>
<p>After the <code>unnest_tokens()</code> functions, we can start to find word counts in the lyrics. One thing to consider is that the song lyrics contain words that make sentences flow but have no/little meaning on their own. These words are called stop words. Examples of stop words include the, and, me, you, of, etc. An <code>anti_join()</code> from R’s dplyr package will remove words from the lyrics in meteora_words.</p>
<p>The use of the <code>count()</code> function will extract word counts.</p>
<p> </p>
<pre class="r"><code># Word Counts In Meteora:

# Remove English stop words from Meteora:
# Stop words include the, and, me , myself, of and so on.

meteora_words &lt;- meteora_words %&gt;%
                 anti_join(stop_words) </code></pre>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre class="r"><code># Word Counts:

meteora_wordcounts &lt;- meteora_words %&gt;% count(word, sort = TRUE)
 
head(meteora_wordcounts, n = 15)</code></pre>
<pre><code>## # A tibble: 15 x 2
##         word     n
##        &lt;chr&gt; &lt;int&gt;
##  1      feel    27
##  2     wanna    27
##  3      pain    25
##  4    forget    14
##  5    inside    14
##  6      time    14
##  7      stay    13
##  8      heal    12
##  9 listening    11
## 10  memories    11
## 11     heart    10
## 12  nobody&#39;s    10
## 13     stand     9
## 14     trust     9
## 15    caught     8</code></pre>
<p> </p>
<p>Now that we have word counts, the results can be displayed in the form of a bar graph with the use of R’s ggplot2 package.</p>
<p>In the code below, the <code>filter()</code> function is used to extract words with a count greater than 8. In <code>geom_col()</code>, I make the bars blue with the fill argument. Labels are added the <code>labs()</code> and geom_text add on functions.</p>
<p> </p>
<pre class="r"><code># We can now make a plot of the word counts.


# ggplot2 Plot (Counts greater than 8)
# Bottom axis removed with element_blank()
# Counts in the bar with geom_text.

meteora_wordcounts %&gt;% 
  mutate(word = reorder(word, n)) %&gt;% 
  filter(n &gt; 8) %&gt;%
  ggplot(aes(word, n)) + 
  geom_col(fill = &quot;blue&quot;) +
  coord_flip() +
  labs(x = &quot;Word \n&quot;, y = &quot;\n Count &quot;, title = &quot;Word Counts In Linkin Park - Meteora \n&quot;) +
  geom_text(aes(label = n), hjust = 1.2, colour = &quot;white&quot;, fontface = &quot;bold&quot;) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_blank(),
        axis.ticks.x = element_blank(),
        axis.text.x = element_blank(),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12))</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-3-1.png" width="384" /></p>
<p> </p>
<p>From the plot, the top words are wanna, feel, pain and time. The word wanna is slang for want to.</p>
<p><a name="sentiment"></a></p>
<p> </p>
</div>
<div id="sentiment-analysis-in-linkin-park---meteora" class="section level3">
<h3><u>Sentiment Analysis In Linkin Park - Meteora</u></h3>
<p> </p>
<p>Sentiment analysis determines whether a piece of text is viewed as positive or negative. This analysis is subjective as different people have different views on the connotations of certain words. The lyrics in Linkin Park - Meteora are analysed with three lexicons. These three lexicons are bing, AFINN and nrc.</p>
<p> </p>
<p><u><strong>Bing Lexicon</strong></u></p>
<p> </p>
<p>With our wordcounts in R, we select the words from the lyrics which are the same as the words from the list of words associated with the bing lexicon.</p>
<p> </p>
<pre class="r"><code>### bing sentiment
## get_sentiments(&quot;bing&quot;)

meteora_words_bing &lt;- meteora_wordcounts %&gt;%
     inner_join(get_sentiments(&quot;bing&quot;), by = &quot;word&quot;) %&gt;%
     ungroup()
 
head(meteora_words_bing)</code></pre>
<pre><code>## # A tibble: 6 x 3
##     word     n sentiment
##    &lt;chr&gt; &lt;int&gt;     &lt;chr&gt;
## 1   pain    25  negative
## 2   heal    12  positive
## 3  trust     9  positive
## 4 easier     8  positive
## 5   numb     8  negative
## 6  tired     8  negative</code></pre>
<p> </p>
<p>The words with their counts and sentiment are plotted with ggplot2.</p>
<p> </p>
<pre class="r"><code>meteora_words_bing %&gt;%
  filter(n &gt; 3) %&gt;%
  ggplot(aes(x = reorder(word, n), y = n, fill = sentiment)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;identity&quot;) +
  geom_text(aes(label = n), colour = &quot;black&quot;, hjust = 1, fontface = &quot;bold&quot;) +
  coord_flip() +
  labs(x = &quot;\n Word \n&quot;, y = &quot;Word Count \n&quot;, title = &quot;Sentiment Scores Of Words \n Under bing Lexicon&quot;) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12)) +
        scale_fill_manual(values=c(&quot;#FF0000&quot;, &quot;#01DF3A&quot;), guide=FALSE)</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-5-1.png" width="384" /></p>
<p> </p>
<p>Under the bing lexicon, the most frequent word is pain. The word pain is associated with a red bar which signals that pain is a negative word. Heal is the second most frequent word which has a positive sentiment. By looking at the colour of the side bars, the most frequent words have a negative sentiment for the most part. This plot does suggest that the album Meteora is a mostly negative (or dark) album.</p>
<p>In <code>ggplot2</code>, you can produce separate sentiment bar graphs in one plot. One bar graph is for positive words and the second bar graph is for negative words. The add on function <code>facet_wrap()</code> allows for side by side graphs within one plot as shown below.</p>
<p> </p>
<pre class="r"><code># Separate Sentiment plots for positive and negative words (word counts &gt; 2):

meteora_words_bing %&gt;%
  filter(n &gt; 2) %&gt;%
  ungroup() %&gt;%
  mutate(word = reorder(word, n)) %&gt;%
  ggplot(aes(word, n, fill = sentiment)) +
  geom_col(show.legend = FALSE) +
  geom_text(aes(label = n), colour = &quot;black&quot;, hjust = 1, fontface = &quot;bold&quot;) +
  facet_wrap(~sentiment, scales = &quot;free_y&quot;) +
  labs(x = &quot;\n Word \n&quot;, y = &quot;\n Word Count &quot;, title = &quot;Sentiment Scores Of Words \n Under bing Lexicon&quot;) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12)) +
  scale_fill_manual(values=c(&quot;#FF0000&quot;, &quot;#01DF3A&quot;), guide=FALSE) +
  coord_flip()</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-6-1.png" width="384" /></p>
<p> </p>
<p>From the plot, you can clearly see that there are more negative words than positive words from the album lyrics.</p>
<p> </p>
<p><u><strong>AFINN Lexicon</strong></u></p>
<p> </p>
<p>It is expected that the AFINN lexicon will produce different results from using the bing lexicon. Instead of classifying a word as positive or negative like in the bing lexicon, the AFINN lexicon gives select words a score from -5 to +5. Negative scores are for words with negative sentiment while positive scores are for words with positive sentiment. Scores of zero are associated with neutral words.</p>
<p> </p>
<pre class="r"><code>### AFINN sentiment

meteora_words_AFINN &lt;- meteora_wordcounts %&gt;%
   inner_join(get_sentiments(&quot;afinn&quot;), by = &quot;word&quot;) %&gt;%
   mutate(is_positive = score &gt; 0) 
 
head(meteora_words_AFINN)</code></pre>
<pre><code>## # A tibble: 6 x 4
##     word     n score is_positive
##    &lt;chr&gt; &lt;int&gt; &lt;int&gt;       &lt;lgl&gt;
## 1   pain    25    -2       FALSE
## 2 forget    14    -1       FALSE
## 3  trust     9     1        TRUE
## 4   numb     8    -1       FALSE
## 5  tired     8    -2       FALSE
## 6   stop     7    -1       FALSE</code></pre>
<p> </p>
<p>The most frequent word is pain which has an AFINN sentiment score of -2. Through the use of dplyr’s <code>mutate()</code> function, I have added an extra column called is_positive which classifies the word as positive or negative depending on the word score. This is_positive variable will be helpful for plotting.</p>
<p>Plotting the results under the AFINN lexicon is not much different that the one for bing.</p>
<p> </p>
<pre class="r"><code>meteora_words_AFINN %&gt;%
  filter(n &gt; 2) %&gt;%
  ggplot(aes(x = reorder(word, n), y = n, fill = is_positive)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;identity&quot;) +
  geom_text(aes(label = n), colour = &quot;black&quot;, hjust = 1, fontface = &quot;bold&quot;, size = 3.1) +
  labs(x = &quot;\n Word \n&quot;, y = &quot;\n Word Count &quot;, title = &quot;Sentiment Scores Of Words \n With AFINN Lexicon&quot;) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12)) +
  scale_fill_manual(values=c(&quot;#FF0000&quot;, &quot;#01DF3A&quot;), guide=FALSE) +
  coord_flip()</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-8-1.png" width="384" /></p>
<p> </p>
<p>The add on function <code>facet_wrap()</code> is used again to produce side by side bar graphs in one plot. I have made a slight modification on the labels. The word_labels object is a vector that produces the label “Negative Words” for FALSE and “Positive Words” for TRUE. This word_labels is used in the <code>as_labeller()</code> function in the labeller argument for <code>facet_wrap()</code>.</p>
<p> </p>
<pre class="r"><code># Positive and negative plots separated with facet_wrap():


# Change labels 
# (Source: https://stackoverflow.com/questions/3472980/ggplot-how-to-change-facet-labels)

word_labels &lt;- c(
  `FALSE` = &quot;Negative Words&quot;,
  `TRUE` = &quot;Positive Words&quot;
)

meteora_words_AFINN %&gt;%
  filter(n &gt;= 3) %&gt;%
  ggplot(aes(x = reorder(word, n), y = n, fill = is_positive)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;identity&quot;) +
  geom_text(aes(label = n), colour = &quot;black&quot;, hjust = 1, fontface = &quot;bold&quot;, size = 3.2) +
  facet_wrap(~is_positive, scales = &quot;free_y&quot;, labeller = as_labeller(word_labels)) +
  labs(x = &quot;\n Word \n&quot;, y = &quot;\n Word Count &quot;, title = &quot;Negative &amp; Positive Words \n With The AFINN Lexicon \n&quot;,
       fill = c(&quot;Negative&quot;, &quot;Positive&quot;)) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12)) +
  scale_fill_manual(values=c(&quot;#FF0000&quot;, &quot;#01DF3A&quot;), guide=FALSE) + 
  coord_flip()</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-9-1.png" width="384" /></p>
<p> </p>
<p><u><strong>nrc Lexicon</strong></u></p>
<p> </p>
<p>With the nrc lexicon, there are no sentiment scores associated with the words. Words under this lexicon have the sentiment of either negative, positive, trust, fear, anger or sadness.</p>
<p>The <code>inner_join()</code> functions from R’s dplyr is used to extract words from the lyrics that are also in <code>get_sentiments(&quot;nrc&quot;)</code>. Next, the <code>filter()</code> function is used to extract the words which have the sentiment as positive or negative.</p>
<p> </p>
<pre class="r"><code>### nrc sentiment:
# get_sentiments(&quot;nrc&quot;)

meteora_words_nrc &lt;- meteora_wordcounts %&gt;%
  inner_join(get_sentiments(&quot;nrc&quot;), by = &quot;word&quot;) %&gt;%
  filter(sentiment %in% c(&quot;positive&quot;, &quot;negative&quot;))

head(meteora_words_nrc)</code></pre>
<pre><code>## # A tibble: 6 x 3
##     word     n sentiment
##    &lt;chr&gt; &lt;int&gt;     &lt;chr&gt;
## 1   pain    25  negative
## 2 forget    14  negative
## 3   heal    12  positive
## 4   numb     8  negative
## 5   real     8  positive
## 6  tired     8  negative</code></pre>
<p> </p>
<p>Once the counts are extracted, the counts can be plotted with the <code>ggplot2</code> package.</p>
<p> </p>
<pre class="r"><code>meteora_words_nrc %&gt;%
  filter(n &gt;= 3) %&gt;%
  ggplot(aes(x = reorder(word, n), y = n, fill = sentiment)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;identity&quot;) +
  geom_text(aes(label = n), colour = &quot;black&quot;, hjust = 1, fontface = &quot;bold&quot;, size = 3.2) +
  facet_wrap(~sentiment, scales = &quot;free_y&quot;) +
  labs(x = &quot;\n Word \n&quot;, y = &quot;\n Word Count &quot;, title = &quot;Negative &amp; Positive Words \n With The nrc Lexicon \n&quot;) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12)) +
  scale_fill_manual(values=c(&quot;#FF0000&quot;, &quot;#01DF3A&quot;), guide=FALSE) + 
  coord_flip()</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-11-1.png" width="384" /></p>
<p> </p>
<p><strong>NOTE</strong></p>
<p> </p>
<p>These lexicons are helpful in classifying words as positive or negative but one should remember that these things are NOT perfect. There are words in the English language which classify as a verb instead of a noun and vice versa. In addition, these lexicons may not pick up context, jokes, sarcasm and the like.</p>
<p><a name="bigrams"></a></p>
<p> </p>
<p><u><strong>Bigrams In Meteora</strong></u></p>
<p> </p>
<p>Analyzing single words on their own may not be enough. We can look at phrases with two words. Two word phrases are called bigrams.</p>
<p>The code for having bigrams require a slight modification in the <code>unnest_tokens()</code> function.</p>
<p> </p>
<pre class="r"><code># Bigrams - Looking at phrases with two words 
# (Trigrams looks at three word phrases.)
# Sometimes individual words are not enough, some words are linked with other words.

meteora_lyrics &lt;- readLines(&quot;meteoraLyrics.txt&quot;)</code></pre>
<pre><code>## Warning in readLines(&quot;meteoraLyrics.txt&quot;): incomplete final line found on
## &#39;meteoraLyrics.txt&#39;</code></pre>
<pre class="r"><code># Preview all the lyrics:

meteora_lyrics_df &lt;- data_frame(Text = meteora_lyrics) # tibble aka neater data frame

head(meteora_lyrics_df, n = 15) </code></pre>
<pre><code>## # A tibble: 15 x 1
##                                            Text
##                                           &lt;chr&gt;
##  1 Sometimes I need to remember just to breathe
##  2    Sometimes I need you to stay away from me
##  3     Sometimes I&#39;m in disbelief I didn&#39;t know
##  4                     Somehow I need you to go
##  5                                             
##  6                                   Don&#39;t stay
##  7                          Forget our memories
##  8                     Forget our possibilities
##  9               What you were changing me into
## 10                 Just give me myself back and
## 11                                   Don&#39;t stay
## 12                          Forget our memories
## 13                     Forget our possibilities
## 14         Take all your faithlessness with you
## 15                 Just give me myself back and</code></pre>
<pre class="r"><code>meteora_bigrams &lt;- meteora_lyrics_df %&gt;% 
  unnest_tokens(bigram, input = Text, token = &quot;ngrams&quot;, n = 2)

# Look at the bigrams:

meteora_bigrams</code></pre>
<pre><code>## # A tibble: 3,758 x 1
##               bigram
##                &lt;chr&gt;
##  1       sometimes i
##  2            i need
##  3           need to
##  4       to remember
##  5     remember just
##  6           just to
##  7        to breathe
##  8 breathe sometimes
##  9       sometimes i
## 10            i need
## # ... with 3,748 more rows</code></pre>
<p> </p>
<p>The bigrams have been extracted from the lyrics. In order to produce word counts, stop words need to be removed. To do this, the separate function from R’s tidyr package will separate the bigrams into two separate words and then the filter functions will filter out the stop words.</p>
<p> </p>
<pre class="r"><code># Remove stop words from bigrams with tidyr&#39;s separate function
# along with the filter() function

library(tidyr)

bigrams_separated &lt;- meteora_bigrams %&gt;%
  separate(bigram, c(&quot;word1&quot;, &quot;word2&quot;), sep = &quot; &quot;)

bigrams_filtered &lt;- bigrams_separated %&gt;%
  filter(!word1 %in% stop_words$word) %&gt;%
  filter(!word2 %in% stop_words$word)</code></pre>
<p> </p>
<p>Counts can be produced with the <code>count()</code> function from R’s dplyr package.</p>
<p> </p>
<pre class="r"><code># Filtered bigram counts:
meteora_bigrams_wordcounts &lt;- bigrams_filtered %&gt;% 
  count(word1, word2, sort = TRUE)

head(meteora_bigrams_wordcounts, n = 15)</code></pre>
<pre><code>## # A tibble: 15 x 3
##        word1     word2     n
##        &lt;chr&gt;     &lt;chr&gt; &lt;int&gt;
##  1  nobody&#39;s listening    10
##  2     wanna      feel     8
##  3     wanna      heal     8
##  4     heart      stop     6
##  5  memories    forget     6
##  6      stay    forget     6
##  7     wrong      move     6
##  8     anger      held     3
##  9     blood     sweat     3
## 10    damage   anymore     3
## 11     habit   tonight     3
## 12      hill  struggle     3
## 13 listening      call     3
## 14      pain      head     3
## 15      pain       til     3</code></pre>
<p> </p>
<p>Notice how these counts include the separate words. The <code>unite()</code> function here will unite the two words into bigrams along with their counts.</p>
<p> </p>
<pre class="r"><code># Unite the words with the unite() function:

meteora_bigrams_wordcounts &lt;- meteora_bigrams_wordcounts %&gt;%
  unite(bigram, word1, word2, sep = &quot; &quot;)

meteora_bigrams_wordcounts</code></pre>
<pre><code>## # A tibble: 80 x 2
##                bigram     n
##  *              &lt;chr&gt; &lt;int&gt;
##  1 nobody&#39;s listening    10
##  2         wanna feel     8
##  3         wanna heal     8
##  4         heart stop     6
##  5    memories forget     6
##  6        stay forget     6
##  7         wrong move     6
##  8         anger held     3
##  9        blood sweat     3
## 10     damage anymore     3
## # ... with 70 more rows</code></pre>
<p> </p>
<p>Now that we have counts of the bigrams, these counts can be plotted with ggplot2.</p>
<p> </p>
<pre class="r"><code># We can now make a plot of the word counts.


# ggplot2 Plot (Counts greater than 8)
# Bottom axis removed with element_blank()
# Counts in the bar with geom_text.

meteora_bigrams_wordcounts %&gt;% 
  filter(n &gt; 3) %&gt;%
  ggplot(aes(reorder(bigram, n), n)) + 
  geom_col(fill = &quot;red&quot;) +
  coord_flip() +
  labs(x = &quot;Bigram \n&quot;, y = &quot;\n Count &quot;, title = &quot;Bigrams In Linkin Park - Meteora \n&quot;) +
  geom_text(aes(label = n), hjust = 1.2, colour = &quot;white&quot;, fontface = &quot;bold&quot;) +
  theme(plot.title = element_text(hjust = 0.5), 
        axis.title.x = element_blank(),
        axis.ticks.x = element_blank(),
        axis.text.x = element_blank(),
        axis.title.y = element_text(face=&quot;bold&quot;, colour=&quot;darkblue&quot;, size = 12))</code></pre>
<p><img src="rtext-meteora_files/figure-html/unnamed-chunk-16-1.png" width="384" /></p>
<p> </p>
<p>The most common bigram is nobody’s listening which is the title of one of the songs in the Meteora album. Coming in second place is the bigram wanna feel which is featured often in the single Somewhere I Belong on the album.</p>
<p>I don’t think this bigram plot provides that much useful information. It was an interesting exercise.</p>
<p> </p>
</div>
<div id="references" class="section level3">
<h3><u>References</u></h3>
<p> </p>
<ul>
<li>R Reference Book: Text Mining With R - A Tidy Approach By Julia Silge and David Robinson</li>
<li><a href="https://stackoverflow.com/questions/3744178/ggplot2-sorting-a-plot" class="uri">https://stackoverflow.com/questions/3744178/ggplot2-sorting-a-plot</a></li>
<li>R Graphics Cookbook By Winston Chang</li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
