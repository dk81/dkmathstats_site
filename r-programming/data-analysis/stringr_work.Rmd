---
title = "Working With R's stringr Package"
---


Image Source: https://www.rstudio.com/wp-content/uploads/2014/06/RStudio-Ball.png


Hi there. I have been playing around with the stringr package in the statistical programming language R. This stringr package is a neat package for dealing with strings (text) and data cleaning/formatting.

In this page I showcase some experimentation work I have done using the stringr package function. I go over large portion of the functions in stringr but not all. (There are a few functions that I have not tested or not familiar with.)

My reference here is the R documentation on stringr and its functions.

Note: I am not that familiar with regular expressions but I am learning about it through this page.

&nbsp;

### Sections
---

&nbsp;

- The stringr Package In R

- Installing and Loading stringr

- A Look At The stringr Functions
    - <a href="#length">Length Of Strings</a>
    - <a href="#convert">Converting To Uppercase, Lowercase, Titles</a>
    - <a href="#combine">Combining Multiple Strings Into A Single String</a>
    - <a href="#matches">The Number Of Matches In A String</a>
    - <a href="#detect">Detecting Matches In A String</a>
    - <a href="#duplicate">Duplicating & Multiplying Strings</a>
    - <a href="#extract">Extract A Matching Pattern From A String</a>
    - <a href="#position">Locating The Position Of A Pattern In A String</a>
    - <a href="#match">String Matching</a>
    - <a href="#sorting">Ordering/Sorting Strings</a>
    - <a href="#padding">Padding Strings</a>
    - <a href="#replace">Replacing Patterns In Strings</a>
    - <a href="#split">Splitting Strings</a>
    - <a href="#substrings">Substrings From Strings</a>
    - <a href="#trimming">Trimming Strings</a>
    - <a href="#truncating">Truncating Strings</a>
    - <a href="#words">Extracting Words From A Sentence</a>

&nbsp;




### The stringr Package In R
---

There are cases where you may need to manage strings/text in R. This stringr package is useful for dealing with such strings.

In R/RStudio, you can type in `??stringr` and then click on `stringr::stringr` from the help window to find out some information on stringr. Other resources on stringr include the R documentation here (.pdf) and this webpage.

&nbsp;


### Installing and Loading stringr
---

To install the stringr package, type in this code into R/Rstudio:

`install.packages("stringr")`


After installing the stringr package into R, you can load the stringr package by typing in:

`library(stringr)`

Once the stringr package is loaded, the functions in the stringr package can be used.


&nbsp;

### A Look At The stringr Functions
---

There are quite a few functions in the stringr package so I am keeping details at a minimum. Each subsection refers to a specific function in stringr. Examples are included to show how the functions operate.


<a name="length"></a>

**Length Of Strings**

The length or number of characters in a string can be determined with the str_length() function from stringr. Please refer to the examples below.

```{r}
## Length of strings:

str_length("Hello")
[1] 5

str_length(c("Green", NA, "R", "Programming"))
[1]  5 NA  1 11
```

&nbsp;

<a name="convert"></a>

**Converting To Uppercase, Lowercase, Titles**

Converting strings to uppercase/lowercase letters or to a title format is not difficult. The functions involved are str_to_upper(), str_to_lower() and str_to_title().

```{r}
## Converting cases in a string:

word <- "Green"

print(str_to_upper(word)) # Uppercase

print(str_to_lower(word)) # Lowercase

print(str_to_title(word)) # Title, first letter upper case, rest lowercase
```

&nbsp;

<a name="combine"></a>

**Combining Multiple Strings Into A Single String**

You can combine/concatenate multiple strings into a single string with the `str_c()` function. According to the R documentation, the function has this format.

```{r}
str_c(..., sep = "", collapse = NULL)
Here are some examples.

> ## My example:
>
> fibonacci_ten <- c("1", "1", "2", "3", "5", "8", "13", "21", "34", "55")
>
> str_c("Number: ", fibonacci_ten)
 [1] "Number: 1"  "Number: 1"  "Number: 2"  "Number: 3"  "Number: 5"  "Number: 8"  "Number: 13"
 [8] "Number: 21" "Number: 34" "Number: 55"
>
> str_c("Number", fibonacci_ten, sep = " - ")
 [1] "Number - 1"  "Number - 1"  "Number - 2"  "Number - 3"  "Number - 5"  "Number - 8"
 [7] "Number - 13" "Number - 21" "Number - 34" "Number - 55"
>
> str_c("The number ", fibonacci_ten, " is a Fibonacci number.")
 [1] "The number 1 is a Fibonacci number."  "The number 1 is a Fibonacci number."
 [3] "The number 2 is a Fibonacci number."  "The number 3 is a Fibonacci number."
 [5] "The number 5 is a Fibonacci number."  "The number 8 is a Fibonacci number."
 [7] "The number 13 is a Fibonacci number." "The number 21 is a Fibonacci number."
 [9] "The number 34 is a Fibonacci number." "The number 55 is a Fibonacci number."
>
> str_c(fibonacci_ten[-10], " is less than or equal to ", fibonacci_ten[-1])
[1] "1 is less than or equal to 1"   "1 is less than or equal to 2"  
[3] "2 is less than or equal to 3"   "3 is less than or equal to 5"  
[5] "5 is less than or equal to 8"   "8 is less than or equal to 13"
[7] "13 is less than or equal to 21" "21 is less than or equal to 34"
[9] "34 is less than or equal to 55"
>
> str_c(c("1", NA, "10"), "2") # missing values cases = missing outputs, concatenate strings
[1] "12"  NA    "102"
```

<a name="matches"></a>

&nbsp;


**The Number Of Matches In A String**

The `str_count()`` function can help in finding the number of a specific pattern in a string. Examples are shown below.

```{r}
> ## Number of matches in a string using str_count():
>
> fruit <- "strawberry"
>
> str_count(fruit, pattern = "r") # Find r's
[1] 3
>
> str_count(fruit, pattern = "w") # Find w's
[1] 1
>
> str_count(fruit, pattern = c("w", "a", "y", "r")) # Find w's, a's, y's and r's
[1] 1 1 1 3
>
> colours <- c("green", "red", "blue", "purple", "orange", "yellow", "teal")
>
> str_count(colours, pattern = "e") # Find number of e's in colours; output is a vector
[1] 2 1 1 1 1 1 1
>
> str_count(colours, pattern = "l") # Find number of l's in colours
[1] 0 0 1 1 0 2 1
```

&nbsp;

<a name="detect"></a>


**Detecting Matches In A String**

In stringr, you can detect certain matches/patterns in a string with the `str_detect()` function. Knowledge of regular expressions is helpful depending on what you want to detect. Outputs from `str_detect()` are either TRUE or FALSE.

```{r}
> ## Detect matches in a string using str_count(). Output is a logical vector.
> ## Regular expressions can be used too.
>
> item <- "chair"
>
> str_detect(item, pattern = "a") # Is there an a?
[1] TRUE
>
> str_detect(item, pattern = "y") # Is there a y?
[1] FALSE
>
> str_detect(item, pattern = "[aeiou]") # Is there a vowel?
[1] TRUE
>
> str_detect(item, pattern = "^c") # Is there a starting c?
[1] TRUE
>
> str_detect(item, pattern = "c$") # Is there an ending c?
[1] FALSE
>
> str_detect(c(item, "TV"), pattern = "^c") # Is there a starting c?
[1]  TRUE FALSE
```

&nbsp;

<a name="duplicate"></a>

**Duplicating & Multiplying Strings**

You can create duplicates and multiply strings together with the `str_dup()`` function.

```{r}
> ## Duplicating and combining strings:
> # These examples are similar to the R documentation examples.
>
> food <- c("Pizza", "Chicken", "Noodles", "Salad")
>
> str_dup(food, 2) # Double
[1] "PizzaPizza"     "ChickenChicken" "NoodlesNoodles" "SaladSalad"    
>
> str_dup(food, 1:4) # Single for Pizza, 2x Chicken, 3x Noodles, 4x Salad
[1] "Pizza"                 "ChickenChicken"        "NoodlesNoodlesNoodles" "SaladSaladSaladSalad"
>
> str_c(food, str_dup("!", 1:4)) # Add exclamation marks to food items.
[1] "Pizza!"     "Chicken!!"  "Noodles!!!" "Salad!!!!"
```


<a name="extract"></a>
&nbsp;

**Extract A Matching Pattern From A String**

The `str_extract()` function from the stringr package allows for extracting certain patterns from a string. You can use a single string or a vector of strings in `str_extract()`. Regular expressions can be used as well here. More examples can be found in the stringr documentation.

```{r}
> ## Extract the matching pattern from string:
> # Can use regular expressions; more examples in documentation.
>
> colours <- c("green", "red", "blue", "purple", "orange", "yellow", "teal")
>
> str_extract(string = colours, pattern = "e") # Extract letter e.
[1] "e" "e" "e" "e" "e" "e" "e"
>
> str_extract(string = colours, pattern = "[aeiou]") # Extract vowels.
[1] "e" "e" "u" "u" "o" "e" "e"
>
> str_extract_all(string = colours, pattern = "e") # Extract all cases of letter e.
[[1]]
[1] "e" "e"

[[2]]
[1] "e"

[[3]]
[1] "e"

[[4]]
[1] "e"

[[5]]
[1] "e"

[[6]]
[1] "e"

[[7]]
[1] "e"

>
> str_extract_all(string = colours, pattern = "[aeiou]") # Extract all vowel cases.
[[1]]
[1] "e" "e"

[[2]]
[1] "e"

[[3]]
[1] "u" "e"

[[4]]
[1] "u" "e"

[[5]]
[1] "o" "a" "e"

[[6]]
[1] "e" "o"

[[7]]
[1] "e" "a"
```

&nbsp;

<a name="position"></a>


**Locating The Position Of A Pattern In A String**

There are times when you would rather locate the position of the pattern in a string versus extracting that pattern. The str_locate() function requires a string and a pattern which would output the position of the specified pattern.

If the input is a vector of strings, the output would be a matrix where the number of rows is the number of strings and there would be two columns. The first column represents the starting position for a string and the second column represents the ending position of the string. If the pattern is a single character, the start and end position would be the same.

```{r}
> # Locating the position of patterns in a string:
>
> colours <- c("green", "red", "blue", "purple", "orange", "yellow", "teal")
>
> str_locate(colours, "e") # Find position of e.
     start end
[1,]     3   3
[2,]     2   2
[3,]     4   4
[4,]     6   6
[5,]     6   6
[6,]     2   2
[7,]     2   2
>
> str_locate(colours, "a") # Find position of a.
     start end
[1,]    NA  NA
[2,]    NA  NA
[3,]    NA  NA
[4,]    NA  NA
[5,]     3   3
[6,]    NA  NA
[7,]     3   3

> # Find cases of letter e in green, d in red, u in blue, p in purple and so on:
>
> str_locate(colours, c("e", "d", "u", "p", "n", "y", "l"))
 start end
[1,] 3 3
[2,] 3 3
[3,] 3 3
[4,] 1 1
[5,] 4 4
[6,] 1 1
[7,] 4 4
>
>
> str_locate_all(colours, "e") # Find positions of e in each colour in colours.
[[1]]
 start end
[1,] 3 3
[2,] 4 4

[[2]]
 start end
[1,] 2 2

[[3]]
 start end
[1,] 4 4

[[4]]
 start end
[1,] 6 6

[[5]]
 start end
[1,] 6 6

[[6]]
 start end
[1,] 2 2

[[7]]
 start end
[1,] 2 2

>
> str_locate_all(colours, "o") # Find positions of o in each colour in colours.
[[1]]
 start end

[[2]]
 start end

[[3]]
 start end

[[4]]
 start end

[[5]]
 start end
[1,] 1 1

[[6]]
 start end
[1,] 5 5

[[7]]
 start end
```

&nbsp;

If there is no such pattern, the output would be NA or blank.

&nbsp;

<a name="match"></a>


**String Matching**

You can match certain patterns in a string using the `str_match()` function. This function is very similar to `str_extract()`.

```{r}
> ## String matching:
>
> str_match(string = "yellow", pattern = "ll")
     [,1]
[1,] "ll"
> str_match_all(string = "parallelogram", pattern = "l")
[[1]]
     [,1]
[1,] "l"
[2,] "l"
[3,] "l"
```

&nbsp;

<a name="sorting"></a>

**Ordering/Sorting Strings**

A useful function is ordering/sorting strings. The functions used here are `str_order()` and `str_sort()`. Given a vector of strings, `str_order()` outputs the positions in ABC order (by default). The `str_order()` function outputs the elements in the vector in ABC order.

The template code from the R documentation for both functions are shown below. (I do not know what locale means here.)

str_order(x, decreasing = FALSE, na_last = TRUE, locale = "", ...)
str_sort(x, decreasing = FALSE, na_last = TRUE, locale = "", ...)

&nbsp;

The first example uses five numbers.

```{r}
> ## String Order/Sort:
>
> # Template Code: str_order(x, decreasing = FALSE, na_last = TRUE, locale = "", ...)
> #                str_sort(x, decreasing = FALSE, na_last = TRUE, locale = "", ...)
> # Don't know what locale is.
>
> five_numbers <- as.character(c(1:5))
> five_numbers
[1] "1" "2" "3" "4" "5"
>
> # Order from higherst to lowest, decr is FALSE by default:
>
> str_order(five_numbers, decreasing = TRUE) # Gives positions in vector.
[1] 5 4 3 2 1
> str_sort(five_numbers , decreasing = TRUE) # Outputs each number in vector.
[1] "5" "4" "3" "2" "1"
```

&nbsp;

Note: It is recommended to not sort numbered strings using str_sort() or str_order(). Here is an example.

&nbsp;

```{r}
> # Example - Ordering numbers as strings is bad.
>
> str_sort(as.character(c(1:10)), decreasing = TRUE)
 [1] "9"  "8"  "7"  "6"  "5"  "4"  "3"  "2"  "10" "1"
```

&nbsp;

The output above does not have "10" as the first string. This "10" is second last as I think it looks at the first digit and this "10" is before "1" because of this extra digit.

These next examples are about sorting text alphabetically.

```{r}
> # Ordering objects:
>
> objects <- c("Box", "TV", "Computer", "Phone", "Oven")
>
> # ABC order:
>
> str_order(objects) # Gives positions in vector.
[1] 1 3 5 4 2
> str_sort(objects) # Outputs each number in vector.
[1] "Box"      "Computer" "Oven"     "Phone"    "TV"      
>
> # ZYX Order:
>
> str_order(objects, decreasing = TRUE) # Gives positions in vector.
[1] 2 4 5 3 1
> str_sort(objects , decreasing = TRUE) # Outputs each number in vector.
[1] "TV"       "Phone"    "Oven"     "Computer" "Box"
```

&nbsp;


**Padding Strings**

Padding strings involve adding characters to the left/right or both sides of a string. The code template from the R documentation is shown below along with some examples.

```{r}
> ## Padding a string:
>
> # Template: str_pad(string, width, side = c("left", "right", "both"), pad = " ")
>
> str_pad("Jello", width = 7, side = "right", pad = "!")
[1] "Jello!!"
> str_pad("Jello", width = 7, side = "left", pad = "J")
[1] "JJJello"
>
> # Add 2 Js both sides and 2 !s both sides a vector with 2 elements.
>
> str_pad("Jello", width = 9, side = "both", pad = c("J", "!"))
[1] "JJJelloJJ" "!!Jello!!"
>
> # Making JJJello!!. Inside str_pad makes Jello!!, Outside one adds 2 Js to Jello!!:
>
> str_pad(str_pad("Jello", width = 7, side = "right", pad = "!"),
+         width = 9, side = "left", pad = "J")
[1] "JJJello!!"
```

&nbsp;

<a name="replace"></a>


**Replacing Patterns In Strings**

You can replace patterns in strings with the `str_replace()` and `str_replace_all()` functions from stringr. The user would have to specify the pattern to be replaced inside a string (or a vector of strings) and a replacement.

```{r}
> ## String Replace:
>
> term <- "yellowjello"
>
> # Replace "ll" with black space:
>
> str_replace(term, pattern = "ll", replacement = "") # First instance
[1] "yeowjello"
> str_replace_all(term, pattern = "ll", replacement = "") # All instances
[1] "yeowjeo"
>
> # Replace "ll" with "nn" :
>
> str_replace(term, pattern = "ll", replacement = "nn")
[1] "yennowjello"
> str_replace_all(term, pattern = "ll", replacement = "nn")
[1] "yennowjenno"
```

&nbsp;

<a name="split"></a>

**Splitting Strings**

Given a string or a vector of strings, you can split strings with the `str_split()` function. There is also the `str_split_fixed()` function where the output is a character matrix versus a character vector from `str_split()`. The code below shows the R documentation template code with some of my examples.

```{r}
> ## String Split - Split strings into pieces.
>
> # Template: str_split(string, pattern, n = Inf, simplify = FALSE)
>
> str_split("Hannah Banana", pattern = " ")
[[1]]
[1] "Hannah" "Banana"

>
> str_split("ABC", pattern = "") # Split into each character
[[1]]
[1] "A" "B" "C"

>
>
> oils <- "Canola, Sunflower, Avocado, Sesame, Olive, Castor, Peanut"
>
> str_split(oils, pattern = ", ")
[[1]]
[1] "Canola"    "Sunflower" "Avocado"   "Sesame"    "Olive"     "Castor"    "Peanut"   

>
> str_split(oils, pattern = ", ", n = 2)
[[1]]
[1] "Canola"                                            "Sunflower, Avocado, Sesame, Olive, Castor, Peanut"

>
> str_split(oils, pattern = ", ", n = 1) # One vector
[[1]]
[1] "Canola, Sunflower, Avocado, Sesame, Olive, Castor, Peanut"

>
> str_split(oils, pattern = ", ", n = 3)
[[1]]
[1] "Canola"                                 "Sunflower"                             
[3] "Avocado, Sesame, Olive, Castor, Peanut"

>
> str_split(oils, pattern = ", ", n = 3, simplify = TRUE) # Return character matrix
     [,1]     [,2]        [,3]                                    
[1,] "Canola" "Sunflower" "Avocado, Sesame, Olive, Castor, Peanut"
>
> # The fixed version returns a character matrix vs character vectors:
>
> str_split_fixed(string = oils, pattern = ", ", n = 3)
     [,1]     [,2]        [,3]                                    
[1,] "Canola" "Sunflower" "Avocado, Sesame, Olive, Castor, Peanut"
>
> str_split_fixed(string = oils, pattern = ", ", n = 2)
     [,1]     [,2]                                               
[1,] "Canola" "Sunflower, Avocado, Sesame, Olive, Castor, Peanut"
```

&nbsp;

<a name="substrings"></a>


**Substrings From Strings**

Suppose you have a string (or strings) where you want a subset/portion of the string(s). The `str_sub()` function allows the R user to extract substrings from strings. Start and end positions are needed along with the string object itself in `str_sub()`. (You could also use `str_locate()` to find positions of patterns.)


```{r}
> ## String Sub:
> # Extract & replace substrings from a character vector.
>
> name <- "Roger Federer"
>
> str_sub(name, start = 1, end = 5) # Roger
[1] "Roger"
>
> str_sub(name, start = 7, end = 13) # Federer
[1] "Federer"
>
> # str_count(name) = 13; Output is Federer:
>
> str_sub(name, start = 7, end = str_length(name))
[1] "Federer"
>
> # Fed:
>
> str_locate(name, pattern = "Fed") #7 and 9:
 start end
[1,] 7 9
>
> str_sub(name, start = 7, end = 9)
[1] "Fed"
```

&nbsp;

<a name="trimming"></a>


**Trimming Strings**

Any whitespace in strings can be trimmed/removed by using the `str_trim()` function. The user has to specify whether to trim from the left, right or both sides of the string.

```{r}
> ## String Trim to trim whitespace at start and end of a string:
>
> test <- " Hi "
>
> str_trim(test, "left")
[1] "Hi "
> str_trim(test, "right")
[1] " Hi"
> str_trim(test, "both")
[1] "Hi"
>
> test_cases <- c(" Hi ", " Hey! ")
>
> str_trim(test_cases, "left")
[1] "Hi "   "Hey! "
> str_trim(test_cases, "right")
[1] " Hi"   " Hey!"
> str_trim(test_cases, "both")
[1] "Hi"   "Hey!"
```

&nbsp;

<a name="truncating"></a>

**Truncating Strings**

Truncate can be seen as another word for trim or subset. In stringr, the `str_trunc()` function takes a string, a specified width (substring length), and a side of either right, left or center. The ellipsis = "..." is there by default. The output for `str_trunc()` gives a substring customized to the arguments in `str_trunc()`.

The code below includes the template code from the R documentation and some examples.

```{r}
> ## String Truncate: Extract a number of characters from a string:
>
> # Template: str_trunc(string, width, side = c("right", "left", "center"), ellipsis = "...")
>
> long_sentence <- "This is a very long sentence with many different letters."
>
> str_trunc(string = long_sentence, width = 25, side = "right")
[1] "This is a very long se..."
>
> str_trunc(string = long_sentence, width = 25, side = "left")
[1] "...any different letters."
>
> str_trunc(string = long_sentence, width = 25, side = "center")
[1] "This is a v...nt letters."
```

&nbsp;

<a name="words"></a>


**Extracting Words From A Sentence**

Given a string that is a sentence, the `word()` function from stringr can extract words. The user has to specify a start and end. If you want to extract the first two words in a sentence you would use start = 1 and end = 2. You can somewhat view each word in a sentence as elements in an array/vector.

```{r}
> ## word(): Extract words from a sentence.
>
> sentence <- "The cat in a hat is missing."
>
> word(string = sentence, start = 1, end = 2) # Extract first two words.
[1] "The cat"
>
> word(string = sentence, -1) # Extract last word.
[1] "missing."
>
> word(string = sentence, -3) # Extract third last word.
[1] "hat"
>
> # Multiple sentences case:
>
> sentence_list <- c("Watch out there!", "Here is my car.")
>
> word(sentence_list, 1) # First word in each sentence.
[1] "Watch" "Here"
>
> word(sentence_list, start = 1:2, end = -1)
[1] "Watch out there!" "is my car."
```

&nbsp;
